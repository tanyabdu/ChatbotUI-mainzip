export type ArchetypeId = 
  | "mag" 
  | "prostodushny" 
  | "mudrets" 
  | "iskatel" 
  | "slavny_maly" 
  | "geroy" 
  | "buntar" 
  | "vlyublyonny" 
  | "shut" 
  | "zabotlivy" 
  | "tvorets" 
  | "pravitel";

export interface ArchetypeData {
  id: ArchetypeId;
  name: string;
  description: string;
  characteristics: string;
  metaMessages: string[];
  triggerWords: string[];
  mission: string[];
  superPowers: string[];
  atmosphere: string[];
  contentStyle: string[];
  howToSell: string[];
  brandVoice: {
    tone: string;
    keywords: string[];
  };
  visualGuide: {
    colors: string[];
    fonts: string;
    vibes: string;
  };
}

export const archetypesData: Record<ArchetypeId, ArchetypeData> = {
  mag: {
    id: "mag",
    name: "Маг",
    description: "Харизматичный человек, обладающий силой влияния. Помогает трансформироваться изнутри, его образу сопутствует атмосфера таинственности — это самый сильный архетип действия.",
    characteristics: "Харизматичный, влиятельный, таинственный, трансформирующий",
    metaMessages: [
      "Я сильный духом",
      "Моя сила в силе мысли",
      "Я приношу в жизнь людей удачу и успех",
      "Нет ничего невозможного",
      "Достижения начинаются с проработки убеждений"
    ],
    triggerWords: ["трансформация", "магия", "мистика", "волшебство", "чудо", "преображение", "перерождение", "инсайт", "активация", "интуиция", "метафизика", "глубина", "видение"],
    mission: [
      "Управлять реальностью через внутренние состояния",
      "Постичь тайные законы",
      "Помогать другим развивать видение",
      "Трансформировать"
    ],
    superPowers: ["стратегическое видение", "харизма и магнетизм", "развитая интуиция", "глубина и внутренняя сила"],
    atmosphere: ["глубокое погружение в подсознание", "вера в то, что всё возможно", "ускорение изменений", "духовность и психология"],
    contentStyle: ["глубоко, многомерно, мистически", "завораживающе", "процессы на глубинном уровне", "медитативно"],
    howToSell: [
      "через мистическую харизму и влияние",
      "через идеи о влиянии сознания на материю",
      "через инновации, похожие на волшебство",
      "через поражающие воображение результаты"
    ],
    brandVoice: {
      tone: "Загадочный, глубокий, трансформационный. Говорит о невидимых процессах и скрытых силах.",
      keywords: ["трансформация", "глубина", "магия", "видение", "пробуждение"]
    },
    visualGuide: {
      colors: ["#7c3aed", "#1e1b4b", "#fbbf24"],
      fonts: "Cormorant Garamond для заголовков, Inter для текста",
      vibes: "Мистический минимализм с золотыми акцентами"
    }
  },

  prostodushny: {
    id: "prostodushny",
    name: "Простодушный",
    description: "Оптимист и идеалист. Стремится к счастью, видит красоту в простых вещах. Верит в лучшее и несёт в мир доброту и позитив.",
    characteristics: "Оптимистичный, искренний, доверчивый, позитивный",
    metaMessages: [
      "Мне нравится этот мир",
      "Счастье можно найти в мелочах",
      "Всё должно быть идеально",
      "Нет злых людей — есть несчастные"
    ],
    triggerWords: ["лёгкость", "простота", "радость", "счастье", "позитив", "нежность", "искренность", "чистота", "безмятежность", "волшебство"],
    mission: [
      "Создать райское место/сообщество",
      "Помочь людям стать счастливыми",
      "Нести в мир доброту и простоту",
      "Показать красоту жизни"
    ],
    superPowers: ["оптимизм", "вера в лучшее", "позитив и открытость", "искренность", "спонтанность"],
    atmosphere: ["лёгкость и радость", "романтика и мечтательность", "искренние отношения"],
    contentStyle: ["эмоционально", "легко и просто", "доверительно", "заряжает позитивом"],
    howToSell: [
      "результаты просто и легко",
      "безопасное пространство",
      "призыв расслабиться и насладиться жизнью",
      "простая технология для волшебной жизни"
    ],
    brandVoice: {
      tone: "Лёгкий, тёплый, воодушевляющий. Несёт свет и радость в каждом слове.",
      keywords: ["радость", "простота", "счастье", "свет", "гармония"]
    },
    visualGuide: {
      colors: ["#fef3c7", "#fde68a", "#93c5fd"],
      fonts: "Nunito для заголовков, Open Sans для текста",
      vibes: "Светлый, воздушный, пастельные тона"
    }
  },

  mudrets: {
    id: "mudrets",
    name: "Мудрец",
    description: "Эксперт с хорошей интуицией. Умеет анализировать и структурировать информацию, находить решения сложных задач. Стремится к истине и глубокому пониманию.",
    characteristics: "Экспертный, аналитический, рассудительный, объективный",
    metaMessages: [
      "Я не лезу в то, в чём не разбираюсь",
      "Мне хочется постигать и узнавать глубже",
      "Знания должны быть качественными",
      "Всё можно улучшить"
    ],
    triggerWords: ["анализ", "система", "знания", "эксперт", "истина", "интеллект", "исследование", "технология", "логика", "доказательства"],
    mission: [
      "Использовать интеллект для постижения мира",
      "Создавать осмысленный контекст",
      "Формировать систему знаний"
    ],
    superPowers: ["ум и начитанность", "рассудительность", "аналитика", "логика", "переработка информации", "цельное видение"],
    atmosphere: ["высокоинтеллектуальная", "экспертная точка зрения", "качественные знания"],
    contentStyle: ["экспертно через знания", "интеллектуально", "с призывом к обсуждениям", "образовательно"],
    howToSell: [
      "через аргументы и факты",
      "через трансляцию экспертности",
      "авторский подход и технология",
      "через глубокое погружение в суть"
    ],
    brandVoice: {
      tone: "Экспертный, вдумчивый, структурированный. Объясняет сложное простым языком.",
      keywords: ["знания", "анализ", "система", "понимание", "истина"]
    },
    visualGuide: {
      colors: ["#1e3a5f", "#94a3b8", "#f8fafc"],
      fonts: "Merriweather для заголовков, Roboto для текста",
      vibes: "Классический, академичный, структурированный"
    }
  },

  iskatel: {
    id: "iskatel",
    name: "Искатель",
    description: "Постоянно в движении и поиске. Индивидуалист, авантюрист, искатель приключений. Жаждет свободы и новых открытий.",
    characteristics: "Свободолюбивый, независимый, авантюрный, любознательный",
    metaMessages: [
      "Я в вечном поиске",
      "Я готов к приключениям",
      "Мне нравится всё новое",
      "Мне не страшно рискнуть",
      "Я лёгок на подъём"
    ],
    triggerWords: ["путешествие", "свобода", "открытие", "поиск", "приключение", "экспедиция", "новое", "независимость", "путь", "странник"],
    mission: [
      "Открывать новое и неизведанное",
      "Вести за собой",
      "Помочь людям найти свою индивидуальность",
      "Свобода во всех проявлениях"
    ],
    superPowers: ["самостоятельность", "быстрая адаптация", "авантюризм", "внимательность", "лёгкость на подъём"],
    atmosphere: ["свободное общение", "движение и активность", "саморазвитие", "энтузиазм"],
    contentStyle: ["свобода и отсутствие ограничений", "многовариативность", "лайфхаки", "сериальный формат"],
    howToSell: [
      "через путешествие",
      "через призыв к самовыражению",
      "через выход к свободе и независимости",
      "через новейшие тренды"
    ],
    brandVoice: {
      tone: "Свободный, вдохновляющий на открытия, динамичный. Зовёт в путь.",
      keywords: ["свобода", "путь", "открытие", "приключение", "новое"]
    },
    visualGuide: {
      colors: ["#059669", "#34d399", "#fcd34d"],
      fonts: "Montserrat для заголовков, Lato для текста",
      vibes: "Природный, динамичный, с элементами путешествий"
    }
  },

  slavny_maly: {
    id: "slavny_maly",
    name: "Славный малый",
    description: "Компанейский, общительный, «свой в доску». Транслирует общность с окружающими, простоту, добродушность. Эдакий хороший сосед.",
    characteristics: "Дружелюбный, простой, душевный, открытый",
    metaMessages: [
      "Я на равных с вами",
      "У нас одинаковые интересы",
      "Мне важен покой и дружба",
      "Я готов делиться",
      "У меня вам будет классно"
    ],
    triggerWords: ["друзья", "доброта", "надёжность", "мы вместе", "простой", "свой", "душевный", "честность", "товарищество", "равноправие"],
    mission: [
      "Увлечь и объединить",
      "Сплотить вокруг общих ценностей",
      "Жить простой земной жизнью",
      "Помогать людям быть открытыми"
    ],
    superPowers: ["командный дух", "принятие несовершенства", "душевность и эмпатия", "объединение людей"],
    atmosphere: ["коммуникация на простом языке", "тёплое дружеское общение", "поддержка"],
    contentStyle: ["позитивно и открыто", "бесхитростно и по-настоящему", "трансляция ценностей дружбы", "чувство принадлежности"],
    howToSell: [
      "через простые функции и форму",
      "через массовые акции",
      "через принадлежность к дружному сообществу"
    ],
    brandVoice: {
      tone: "Дружелюбный, простой, тёплый. Как разговор с хорошим другом.",
      keywords: ["дружба", "вместе", "простота", "поддержка", "свои"]
    },
    visualGuide: {
      colors: ["#f97316", "#fed7aa", "#fef3c7"],
      fonts: "Rubik для заголовков, Inter для текста",
      vibes: "Тёплый, уютный, дружеский"
    }
  },

  geroy: {
    id: "geroy",
    name: "Герой",
    description: "Хочет сделать мир лучше. Любит преодолевать препятствия, упорен, дисциплинирован. Мотивирует идти и делать, ориентирован на результаты.",
    characteristics: "Сильный, решительный, мотивирующий, целеустремлённый",
    metaMessages: [
      "Я уверен в себе",
      "Я лидер",
      "Я готов преодолевать сложности",
      "Следуйте за мной и получите победу"
    ],
    triggerWords: ["сила", "победа", "достижение", "мотивация", "героизм", "преодоление", "цель", "вызов", "эффективность", "мужество"],
    mission: [
      "Совершенствование себя и мира",
      "Достигать недостигаемого",
      "Помочь людям стать смелее и результативнее"
    ],
    superPowers: ["высокая работоспособность", "сила воли", "умение не сдаваться", "дисциплина", "решительность"],
    atmosphere: ["сообщество достигаторов", "мотивация", "показать подвиг на своём примере"],
    contentStyle: ["тотальная мотивация", "сильная уверенная подача", "показывать препятствия и достижения"],
    howToSell: [
      "помочь увидеть на что способны",
      "через историю преодоления",
      "показать как стать номер 1"
    ],
    brandVoice: {
      tone: "Мощный, мотивирующий, вдохновляющий на действие. Зовёт к победе.",
      keywords: ["победа", "сила", "действие", "результат", "преодоление"]
    },
    visualGuide: {
      colors: ["#dc2626", "#1e293b", "#fbbf24"],
      fonts: "Oswald для заголовков, Source Sans Pro для текста",
      vibes: "Энергичный, мощный, с яркими акцентами"
    }
  },

  buntar: {
    id: "buntar",
    name: "Бунтарь",
    description: "Явно выделяется из толпы. Стремится бунтовать и разрушать неработающие системы, способен на революционные идеи. Не боится говорить правду.",
    characteristics: "Смелый, провокационный, независимый, революционный",
    metaMessages: [
      "Мне плевать что вы обо мне подумаете",
      "Я офигенный",
      "Есть только одно правильное мнение — моё",
      "Всё что не работает — уничтожить"
    ],
    triggerWords: ["бунт", "свобода", "правда", "вызов", "революция", "разрушение", "провокация", "нарушать правила", "смелость", "независимость"],
    mission: [
      "Бросить вызов ценностям общества",
      "Борьба против угнетения",
      "Выход за рамки ограничений",
      "Разорвать путы устаревшего мышления"
    ],
    superPowers: ["смелость разрушать", "умение говорить в лицо", "рисковать", "непокорность"],
    atmosphere: ["бунт против системы", "резкие высказывания", "шоковое поведение"],
    contentStyle: ["неформально, вольно", "провокация и вызов", "горькая пилюля правды", "новые правила"],
    howToSell: [
      "через леденящие кровь истории",
      "через обещание освободиться от оков",
      "через разрушение стереотипов",
      "через шоковый эффект"
    ],
    brandVoice: {
      tone: "Дерзкий, провокационный, честный до резкости. Не боится называть вещи своими именами.",
      keywords: ["правда", "свобода", "вызов", "революция", "честность"]
    },
    visualGuide: {
      colors: ["#18181b", "#ef4444", "#f5f5f5"],
      fonts: "Impact для заголовков, Roboto Condensed для текста",
      vibes: "Контрастный, дерзкий, с красными акцентами"
    }
  },

  vlyublyonny: {
    id: "vlyublyonny",
    name: "Влюблённый",
    description: "Желает быть красивым и притягательным. Живёт эмоциями и ощущениями, испытывает наслаждение от жизни. Гедонист, хочет быть особенным.",
    characteristics: "Чувственный, эмоциональный, эстетичный, страстный",
    metaMessages: [
      "Я люблю жизнь и людей",
      "Я хочу наслаждаться",
      "Я остро чувствую происходящее",
      "Нам нужно жить в кайф"
    ],
    triggerWords: ["любовь", "страсть", "красота", "эмоции", "удовольствие", "наслаждение", "чувства", "желание", "восторг", "элегантность"],
    mission: [
      "Следовать за своими желаниями",
      "Показывать красоту жизни",
      "Научить наслаждаться",
      "Любить и быть любимым"
    ],
    superPowers: ["харизма и обаяние", "элегантность", "эмоциональность", "умение восхищать"],
    atmosphere: ["доверительные блоги", "эстетика", "чувства и эмоции"],
    contentStyle: ["увлекательно, вкусно", "соблазнительно", "красота во всём", "много чувств и эмоций"],
    howToSell: [
      "через страсть к своему делу",
      "через обещание сделать соблазнительными",
      "через возможность привлекать внимание"
    ],
    brandVoice: {
      tone: "Чувственный, эстетичный, соблазнительный. Каждое слово — как прикосновение.",
      keywords: ["красота", "чувства", "любовь", "наслаждение", "страсть"]
    },
    visualGuide: {
      colors: ["#be185d", "#fda4af", "#ffe4e6"],
      fonts: "Playfair Display для заголовков, Lora для текста",
      vibes: "Романтичный, элегантный, с розовыми оттенками"
    }
  },

  shut: {
    id: "shut",
    name: "Шут",
    description: "Остряк, который не против посмеяться над собой. Обладает харизмой, артистизмом, позитивен и оптимистичен. Превращает скучное в весёлое.",
    characteristics: "Весёлый, остроумный, лёгкий, артистичный",
    metaMessages: [
      "Мне смешно всегда и везде",
      "К серьёзным вещам нужно относиться с улыбкой",
      "Каждый день должен быть ярким",
      "Я принесу в вашу жизнь позитив и креатив"
    ],
    triggerWords: ["прикольно", "весело", "кайф", "смех", "юмор", "шутка", "забавно", "клёво", "потрясающе", "хайп"],
    mission: [
      "Жить с удовольствием",
      "Помогать миру справиться с абсурдностью",
      "Снижать градус серьёзности"
    ],
    superPowers: ["игривость", "шутливость", "экстравагантность", "дерзость", "свободолюбие"],
    atmosphere: ["лёгкость", "жизнь в наслаждение", "смех", "в блоге не скучно"],
    contentStyle: ["ярко и привлекающе внимание", "лёгкость и юмор", "хайп", "наслаждение жизнью"],
    howToSell: [
      "через спонтанность и энергетику",
      "через вау-эффекты",
      "через хайп и иронию",
      "через призыв радоваться жизни"
    ],
    brandVoice: {
      tone: "Лёгкий, ироничный, с юмором. Умеет рассмешить и поднять настроение.",
      keywords: ["веселье", "смех", "лёгкость", "радость", "кайф"]
    },
    visualGuide: {
      colors: ["#f59e0b", "#8b5cf6", "#06b6d4"],
      fonts: "Fredoka One для заголовков, Quicksand для текста",
      vibes: "Яркий, игривый, разноцветный"
    }
  },

  zabotlivy: {
    id: "zabotlivy",
    name: "Заботливый",
    description: "Сочувствующий альтруист, желает помогать окружающим. Щедрый спаситель и хранитель, заботится сначала о других — потом о себе.",
    characteristics: "Заботливый, поддерживающий, тёплый, надёжный",
    metaMessages: [
      "Я хочу давать пользу",
      "Мне важно проявлять заботу",
      "Мне под силу сделать мир добрее",
      "Всё должно строиться на помощи"
    ],
    triggerWords: ["забота", "поддержка", "помощь", "защита", "надёжность", "безопасность", "тепло", "уют", "сочувствие", "польза"],
    mission: [
      "Окружить людей заботой",
      "Дать опору и поддержку",
      "Взращивание и обучение",
      "Пробудить в людях сострадание"
    ],
    superPowers: ["любовь к людям", "эмпатия", "сострадание", "умение обучать", "быть проводником"],
    atmosphere: ["комфортное и тёплое пространство", "искренняя забота", "естественность"],
    contentStyle: ["заботливо, неравнодушно", "вовлечённость в проблемы аудитории", "советы и подборки", "поддерживающе и мягко"],
    howToSell: [
      "через неравнодушные отношения",
      "безопасное пространство для роста",
      "помощь в пути от А к Б",
      "всё продумано за клиента"
    ],
    brandVoice: {
      tone: "Тёплый, поддерживающий, заботливый. Как объятие в текстовом формате.",
      keywords: ["забота", "поддержка", "тепло", "помощь", "безопасность"]
    },
    visualGuide: {
      colors: ["#16a34a", "#bbf7d0", "#fef9c3"],
      fonts: "Comfortaa для заголовков, Nunito для текста",
      vibes: "Уютный, тёплый, природные тона"
    }
  },

  tvorets: {
    id: "tvorets",
    name: "Творец",
    description: "Креативный новатор, который не боится быть ярким и смелым. Любит создавать тренды, изобретать новое, создавать вечные ценности.",
    characteristics: "Креативный, уникальный, новаторский, вдохновлённый",
    metaMessages: [
      "Я полон творческих идей",
      "Мои продукты уникальны",
      "Я достоин большего",
      "Я за вечность и авторство"
    ],
    triggerWords: ["вдохновение", "творчество", "инновация", "уникальность", "креатив", "идея", "воображение", "авторский", "оригинальный", "импровизация"],
    mission: [
      "Создавать культурный слой",
      "Развивать нестандартный взгляд",
      "Воплощать видение в форму"
    ],
    superPowers: ["уникальность и талант", "новаторство", "состояние потока", "богатое воображение", "артистизм"],
    atmosphere: ["нешаблонное творческое пространство", "тестирование гипотез", "необычные решения"],
    contentStyle: ["ярко, нестандартно", "импульсивность", "восхищение и вдохновение", "творческий беспорядок"],
    howToSell: [
      "через призыв к самовыражению",
      "через обещание развить креативность",
      "через возможность стать уникальным"
    ],
    brandVoice: {
      tone: "Вдохновляющий, творческий, нестандартный. Каждый пост — произведение искусства.",
      keywords: ["творчество", "вдохновение", "уникальность", "идея", "создание"]
    },
    visualGuide: {
      colors: ["#a855f7", "#ec4899", "#3b82f6"],
      fonts: "Abril Fatface для заголовков, Poppins для текста",
      vibes: "Творческий, яркий, с градиентами"
    }
  },

  pravitel: {
    id: "pravitel",
    name: "Правитель",
    description: "Работает для получения и сохранения власти. Любит контроль и систему, обладает организаторскими способностями. Желает уважения и создаёт структуры.",
    characteristics: "Авторитетный, системный, статусный, организованный",
    metaMessages: [
      "Я не терплю хаос",
      "Мне нужна чёткая система",
      "Во всём должен быть смысл",
      "Лучшим — лучшее"
    ],
    triggerWords: ["власть", "управление", "система", "структура", "контроль", "порядок", "статус", "лидерство", "организация", "дисциплина"],
    mission: [
      "Создание процветающей системы",
      "Оставить наследие",
      "Выйти на стабильный доход",
      "Проекты мирового масштаба"
    ],
    superPowers: ["основательность", "дисциплина", "справедливость", "системность", "умение управлять"],
    atmosphere: ["атмосфера влияния", "серьёзный подход", "масштабное мышление", "результативность"],
    contentStyle: ["статус и престиж", "чёткая организация", "множество кейсов", "тайм-менеджмент и контроль"],
    howToSell: [
      "через безупречный стиль",
      "через уверенность и статус",
      "через показатели эффективности",
      "через кейсы и партнёрства"
    ],
    brandVoice: {
      tone: "Уверенный, статусный, властный. Говорит как эксперт, которому доверяют.",
      keywords: ["система", "результат", "контроль", "статус", "успех"]
    },
    visualGuide: {
      colors: ["#1e293b", "#854d0e", "#f5f5f4"],
      fonts: "Cinzel для заголовков, Raleway для текста",
      vibes: "Премиальный, строгий, с золотыми акцентами"
    }
  }
};

export interface QuizQuestion {
  question: string;
  answers: {
    text: string;
    archetype: ArchetypeId;
  }[];
}

export const quizQuestions: QuizQuestion[] = [
  {
    question: "Что для вас важнее всего в работе с клиентом?",
    answers: [
      { text: "Дать им структуру и чёткий план действий", archetype: "pravitel" },
      { text: "Позаботиться, выслушать и поддержать", archetype: "zabotlivy" },
      { text: "Вдохновить на глубокие трансформации", archetype: "mag" },
      { text: "Показать правду, даже если она неудобная", archetype: "buntar" }
    ]
  },
  {
    question: "Как вы относитесь к правилам и традициям в эзотерике?",
    answers: [
      { text: "Изучаю, анализирую и создаю свою систему знаний", archetype: "mudrets" },
      { text: "Создаю свои собственные уникальные правила", archetype: "tvorets" },
      { text: "Соблюдаю строго — это база и фундамент", archetype: "pravitel" },
      { text: "Люблю нарушать правила и удивлять", archetype: "shut" }
    ]
  },
  {
    question: "Какая фраза лучше всего описывает ваш подход?",
    answers: [
      { text: "Всё будет так, как ты захочешь — ты творец своей реальности", archetype: "mag" },
      { text: "Я знаю как правильно и научу тебя этому", archetype: "mudrets" },
      { text: "Давай просто будем собой, без понтов", archetype: "slavny_maly" },
      { text: "Мы вместе пройдём этот путь к победе", archetype: "geroy" }
    ]
  },
  {
    question: "Чего вы больше всего боитесь в профессиональном плане?",
    answers: [
      { text: "Быть скучным и обычным, как все", archetype: "buntar" },
      { text: "Навредить клиенту или дать неверный совет", archetype: "zabotlivy" },
      { text: "Потерять контроль над ситуацией", archetype: "pravitel" },
      { text: "Оказаться некомпетентным в глазах других", archetype: "mudrets" }
    ]
  },
  {
    question: "Какой стиль общения вам ближе?",
    answers: [
      { text: "Строгий, статусный, с позиции эксперта", archetype: "pravitel" },
      { text: "Мистический, загадочный, глубокий", archetype: "mag" },
      { text: "Яркий, с юмором и лёгкостью", archetype: "shut" },
      { text: "Тёплый, мягкий, поддерживающий", archetype: "zabotlivy" }
    ]
  },
  {
    question: "Что движет вами в работе?",
    answers: [
      { text: "Желание создать что-то уникальное и авторское", archetype: "tvorets" },
      { text: "Стремление помочь людям стать лучше", archetype: "geroy" },
      { text: "Поиск новых горизонтов и свободы", archetype: "iskatel" },
      { text: "Желание нести красоту и любовь", archetype: "vlyublyonny" }
    ]
  },
  {
    question: "Как вы видите идеальный мир?",
    answers: [
      { text: "Мир, где царит радость и простота", archetype: "prostodushny" },
      { text: "Мир, где все свободны и независимы", archetype: "iskatel" },
      { text: "Мир, где люди объединены общими ценностями", archetype: "slavny_maly" },
      { text: "Мир, полный красоты и чувств", archetype: "vlyublyonny" }
    ]
  },
  {
    question: "Какой контент вам ближе создавать?",
    answers: [
      { text: "Глубокий, трансформационный, с инсайтами", archetype: "mag" },
      { text: "Экспертный, аналитический, с фактами", archetype: "mudrets" },
      { text: "Лёгкий, позитивный, заряжающий радостью", archetype: "prostodushny" },
      { text: "Провокационный, честный, без прикрас", archetype: "buntar" }
    ]
  }
];

export function calculateArchetypeResult(answerIndices: number[]): ArchetypeProfile {
  const archetypeCounts: Record<ArchetypeId, number> = {
    mag: 0, prostodushny: 0, mudrets: 0, iskatel: 0,
    slavny_maly: 0, geroy: 0, buntar: 0, vlyublyonny: 0,
    shut: 0, zabotlivy: 0, tvorets: 0, pravitel: 0
  };

  answerIndices.forEach((answerIdx, questionIdx) => {
    if (answerIdx >= 0 && answerIdx < quizQuestions[questionIdx].answers.length) {
      const archetype = quizQuestions[questionIdx].answers[answerIdx].archetype;
      archetypeCounts[archetype]++;
    }
  });

  const sortedArchetypes = Object.entries(archetypeCounts)
    .sort((a, b) => b[1] - a[1])
    .filter(([_, count]) => count > 0);

  const topArchetypes = sortedArchetypes.slice(0, 3).map(([id]) => archetypesData[id as ArchetypeId]);
  
  if (topArchetypes.length === 0) {
    topArchetypes.push(archetypesData.mag);
  }

  const primaryArchetype = topArchetypes[0];
  const secondaryArchetype = topArchetypes[1];

  let combinedDescription = primaryArchetype.description;
  if (secondaryArchetype) {
    combinedDescription = `${primaryArchetype.description} С элементами ${secondaryArchetype.name.toLowerCase()}: ${secondaryArchetype.characteristics.toLowerCase()}.`;
  }

  const allKeywords = topArchetypes.flatMap(a => a.brandVoice.keywords).slice(0, 6);
  const uniqueKeywords = Array.from(new Set(allKeywords));

  let combinedTone = primaryArchetype.brandVoice.tone;
  if (secondaryArchetype) {
    combinedTone = `${primaryArchetype.brandVoice.tone} С нотками ${secondaryArchetype.name.toLowerCase()}.`;
  }

  return {
    topArchetypes: topArchetypes.map(a => a.name),
    description: combinedDescription,
    brandVoice: {
      tone: combinedTone,
      keywords: uniqueKeywords
    },
    visualGuide: {
      colors: primaryArchetype.visualGuide.colors,
      fonts: primaryArchetype.visualGuide.fonts,
      vibes: primaryArchetype.visualGuide.vibes
    }
  };
}

export interface ArchetypeProfile {
  topArchetypes: string[];
  description: string;
  brandVoice: {
    tone: string;
    keywords: string[];
  };
  visualGuide: {
    colors: string[];
    fonts: string;
    vibes: string;
  };
}

export function getArchetypeContentPrompt(archetypeName: string): string {
  const archetype = Object.values(archetypesData).find(a => a.name === archetypeName);
  if (!archetype) return "";

  return `
АРХЕТИП БРЕНДА: ${archetype.name}

ХАРАКТЕРИСТИКИ:
${archetype.characteristics}

ТОНАЛЬНОСТЬ КОНТЕНТА:
${archetype.brandVoice.tone}

СЛОВА-ТРИГГЕРЫ (использовать в тексте):
${archetype.triggerWords.join(", ")}

СТИЛЬ КОНТЕНТА:
${archetype.contentStyle.join("; ")}

АТМОСФЕРА:
${archetype.atmosphere.join("; ")}

КАК ПРОДАВАТЬ:
${archetype.howToSell.join("; ")}
`;
}

export function getArchetypesPromptForGeneration(archetypeNames: string[]): string {
  const prompts = archetypeNames.map(name => getArchetypeContentPrompt(name));
  
  if (prompts.length === 1) {
    return prompts[0];
  }
  
  const primary = archetypeNames[0];
  const secondary = archetypeNames.slice(1).join(" и ");
  
  return `
ОСНОВНОЙ АРХЕТИП: ${primary}
${getArchetypeContentPrompt(primary)}

ДОПОЛНИТЕЛЬНЫЕ АРХЕТИПЫ: ${secondary}
Добавь лёгкие элементы этих архетипов в контент, но основной стиль должен быть ${primary}.
`;
}

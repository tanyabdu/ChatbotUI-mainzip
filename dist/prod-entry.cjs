"use strict";var h=Object.create;var s=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var u=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of g(e))!m.call(t,i)&&i!==n&&s(t,i,{get:()=>e[i],enumerable:!(o=d(e,i))||o.enumerable});return t};var l=(t,e,n)=>(n=t!=null?h(y(t)):{},u(e||!t||!t.__esModule?s(n,"default",{value:t,enumerable:!0}):n,t));var c=require("http"),a=(0,c.createServer)(),r=null,f=`<!DOCTYPE html>
<html><head><title>Loading...</title><meta http-equiv="refresh" content="2"></head>
<body style="display:flex;justify-content:center;align-items:center;height:100vh;font-family:sans-serif;background:#1e1b4b;color:white;">
<div style="text-align:center"><h1>\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430...</h1><p>\u041F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0437\u0430\u043F\u0443\u0441\u043A\u0430\u0435\u0442\u0441\u044F</p></div>
</body></html>`;a.on("request",(t,e)=>{let n=t.url||"/";if(n==="/health"||n==="/__healthcheck"){e.writeHead(200,{"Content-Type":"text/plain"}),e.end("OK");return}if(r){r(t,e);return}n==="/"?(e.writeHead(200,{"Content-Type":"text/html"}),e.end(f)):(e.writeHead(200,{"Content-Type":"text/plain"}),e.end("OK"))});var p=parseInt(process.env.PORT||"5000",10);a.listen(p,"0.0.0.0",()=>{console.log(`[prod] Server listening on port ${p} - health checks ready`),x()});async function x(){try{console.log("[prod] Starting Express app initialization...");let t=(await import("express")).default,e=t();e.get("/health",(o,i)=>i.status(200).send("OK")),e.get("/__healthcheck",(o,i)=>i.status(200).send("OK"));let{initializeApp:n}=await import("./app-init.cjs");await n(a,e),r=e,console.log("[prod] Express app ready - handling requests")}catch(t){console.error("[prod] Failed to initialize Express app:",t)}}

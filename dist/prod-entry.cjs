"use strict";var h=Object.create;var a=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var v=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of g(t))!f.call(e,i)&&i!==r&&a(e,i,{get:()=>t[i],enumerable:!(s=u(t,i))||s.enumerable});return e};var n=(e,t,r)=>(r=e!=null?h(m(e)):{},v(t||!e||!e.__esModule?a(r,"default",{value:e,enumerable:!0}):r,e));var p=n(require("express"),1),d=require("http"),o=(0,p.default)(),l=(0,d.createServer)(o);o.get("/health",(e,t)=>{t.status(200).send("OK")});o.get("/__healthcheck",(e,t)=>{t.status(200).send("OK")});o.get("/",(e,t,r)=>{let s=e.headers["user-agent"]||"";if(s.includes("Mozilla")||s.includes("Chrome")||s.includes("Safari"))return r();t.status(200).send("OK")});var c=parseInt(process.env.PORT||"5000",10);l.listen(c,"0.0.0.0",()=>{console.log(`[prod] Server listening on port ${c}, health checks ready`),setImmediate(async()=>{try{let{initializeApp:e}=await import("./app-init.cjs");await e(l,o),console.log("[prod] Full application initialized")}catch(e){console.error("[prod] Failed to initialize app:",e)}})});

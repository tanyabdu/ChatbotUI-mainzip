"use strict";var m=Object.create;var p=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var v=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of f(e))!k.call(t,a)&&a!==o&&p(t,a,{get:()=>e[a],enumerable:!(n=u(e,a))||n.enumerable});return t};var s=(t,e,o)=>(o=t!=null?m(y(t)):{},v(e||!t||!t.__esModule?p(o,"default",{value:t,enumerable:!0}):o,t));var d=s(require("express"),1),h=require("http");var R=!1;function r(){return R}var i=(0,d.default)(),c=(0,h.createServer)(i);i.use((t,e,o)=>{if(t.path==="/health"||t.path==="/__healthcheck")return e.status(200).json({status:"ok",ready:r()});if(t.path==="/"&&t.method==="GET"&&!r())return e.status(200).send("OK");o()});var l=parseInt(process.env.PORT||"5000",10);c.listen(l,"0.0.0.0",()=>{console.log(`[prod] Health check ready on port ${l}`),setImmediate(async()=>{try{let{initializeApp:t}=await import("./app-init.cjs");await t(c,i),console.log("[prod] Full application initialized")}catch(t){console.error("[prod] Failed to initialize app:",t)}})});
